<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Bilan de Comp√©tences</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; color: #333; }
        #contenu-bilan { border: 1px solid #ccc; padding: 30px; background: #fff; }
        .header { border-bottom: 2px solid #0055aa; margin-bottom: 20px; }
        .btn-pdf { background: #e74c3c; color: white; padding: 10px 20px; border: none; cursor: pointer; margin-bottom: 20px; }
    </style>
</head>
<body>

    <button class="btn-pdf" onclick="genererPDF()">üì• T√©l√©charger mon bilan en PDF</button>

    <div id="contenu-bilan">
        <div class="header">
            <h1>Bilan Individuel de Formation</h1>
            <p>Date : <span id="date-jour"></span></p>
        </div>

        <p><strong>Candidat :</strong> <span id="afficheNom"></span></p>
        <p><strong>Concession :</strong> <span id="afficheConcession"></span></p>
        
        <hr>
        <h3>D√©tails des r√©sultats :</h3>
        <div id="resultats-unitaire">
            </div>
    </div>

    <script>
        // 1. R√©cup√©ration des donn√©es dans l'URL (Nom et Concession)
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById('afficheNom').innerText = urlParams.get('nom') || "Non renseign√©";
        document.getElementById('afficheConcession').innerText = urlParams.get('concession') || "Non renseign√©";
        document.getElementById('date-jour').innerText = new Date().toLocaleDateString();

        // 2. Fonction pour g√©n√©rer le PDF
        function genererPDF() {
            const element = document.getElementById('contenu-bilan');
            const options = {
                margin:       1,
                filename:     'Bilan_' + (urlParams.get('nom') || 'Candidat') + '.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2 },
                jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
            };

            // Lancement de la conversion
            html2pdf().set(options).from(element).save();
        }
    </script>
</body>
</html>